/* Mobile-first responsive styles */

/* CSS Custom Properties for Mobile */
:root {
  /* Safe area insets for notched devices */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);

  /* Viewport height for mobile browsers */
  --vh: 1vh;

  /* Touch target sizes */
  --min-touch-target: 44px;
  --min-touch-target-small: 32px;

  /* Mobile spacing scale */
  --space-xs: 0.25rem;   /* 4px */
  --space-sm: 0.5rem;    /* 8px */
  --space-md: 0.75rem;   /* 12px */
  --space-lg: 1rem;      /* 16px */
  --space-xl: 1.5rem;    /* 24px */
  --space-2xl: 2rem;     /* 32px */
  --space-3xl: 3rem;     /* 48px */

  /* Mobile typography scale */
  --text-xs: 0.75rem;    /* 12px */
  --text-sm: 0.875rem;   /* 14px */
  --text-base: 1rem;     /* 16px */
  --text-lg: 1.125rem;   /* 18px */
  --text-xl: 1.25rem;    /* 20px */
  --text-2xl: 1.5rem;    /* 24px */
  --text-3xl: 1.875rem;  /* 30px */
}

/* Mobile viewport fixes */
html {
  /* Fix for mobile viewport height changes */
  height: 100%;
  height: -webkit-fill-available;
}

body {
  /* Prevent horizontal scroll on mobile */
  overflow-x: hidden;
  /* Improve text rendering on mobile */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Fix for iOS Safari bottom bar */
  padding-bottom: env(safe-area-inset-bottom);
}

/* Touch-friendly interactive elements */
button,
a,
input,
textarea,
select,
[role="button"] {
  min-height: var(--min-touch-target);
  min-width: var(--min-touch-target);
}

/* Remove default touch highlights on iOS */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Improve touch feedback */
@media (hover: none) and (pointer: coarse) {
  button:active,
  a:active,
  [role="button"]:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
}

/* Mobile-optimized form elements */
input,
textarea,
select {
  /* Larger touch targets */
  min-height: var(--min-touch-target);
  padding: var(--space-md) var(--space-lg);

  /* Prevent zoom on iOS when focusing inputs */
  font-size: 16px;
  transform: translateZ(0); /* Force hardware acceleration */
}

input[type="search"] {
  /* iOS specific fixes */
  -webkit-appearance: none;
  border-radius: 8px;
}

/* Mobile-friendly scrolling */
.scroll-smooth {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Mobile navigation improvements */
nav {
  /* Ensure navigation is touch-friendly */
  padding-top: calc(var(--safe-area-top) + var(--space-lg));
  padding-bottom: var(--space-lg);
}

/* Mobile card layouts */
.card-mobile {
  margin: var(--space-md);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Mobile grid adjustments */
.grid-mobile {
  display: grid;
  gap: var(--space-md);
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .grid-mobile {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 768px) {
  .grid-mobile {
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
  }
}

/* Mobile-optimized spacing */
.space-mobile-xs > * + * { margin-top: var(--space-xs); }
.space-mobile-sm > * + * { margin-top: var(--space-sm); }
.space-mobile-md > * + * { margin-top: var(--space-md); }
.space-mobile-lg > * + * { margin-top: var(--space-lg); }
.space-mobile-xl > * + * { margin-top: var(--space-xl); }

/* Mobile text adjustments */
.text-mobile-xs { font-size: var(--text-xs); line-height: 1.25; }
.text-mobile-sm { font-size: var(--text-sm); line-height: 1.375; }
.text-mobile-base { font-size: var(--text-base); line-height: 1.5; }
.text-mobile-lg { font-size: var(--text-lg); line-height: 1.625; }
.text-mobile-xl { font-size: var(--text-xl); line-height: 1.75; }

/* Mobile-safe fixed positioning */
.fixed-mobile-top {
  position: fixed;
  top: var(--safe-area-top);
  left: 0;
  right: 0;
  z-index: 50;
}

.fixed-mobile-bottom {
  position: fixed;
  bottom: var(--safe-area-bottom);
  left: 0;
  right: 0;
  z-index: 50;
}

/* Mobile modal improvements */
.modal-mobile {
  margin: var(--space-md);
  max-height: calc(100vh - var(--safe-area-top) - var(--safe-area-bottom) - 2rem);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Pull-to-refresh indicator space */
.ptr-indicator {
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  font-size: var(--text-sm);
}

/* Mobile-specific animations */
@media (prefers-reduced-motion: no-preference) {
  .slide-in-mobile {
    animation: slideInMobile 0.3s ease-out;
  }

  .fade-in-mobile {
    animation: fadeInMobile 0.3s ease-out;
  }
}

@keyframes slideInMobile {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes fadeInMobile {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Mobile landscape orientation fixes */
@media (orientation: landscape) and (max-height: 500px) {
  .mobile-landscape-compact {
    padding-top: var(--space-sm);
    padding-bottom: var(--space-sm);
  }

  .mobile-landscape-hide {
    display: none;
  }
}